<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <template id="reservation_airline_content_view">
        <!-- Main Params -->
        <div class="row">
            <div class="col-12">
                <span style="font-size: 28px; font-weight: 730">Itinerary Detail(s)</span><br/>
            </div>
        </div>
        <div class="row">
            <div class="col-12">
                <t t-foreach="doc.provider_booking_ids" t-as="provider_itin_id">
                    <table class="table table-sm" style="text-align:center;">
                        <thead>
                            <tr>
                                <th>PNR</th>
                                <th>Departure</th>
                                <th>Arrival</th>
                                <th>Carrier</th>
                                <th>Flight</th>
<!--                                <th>Departure Date</th>-->
<!--                                <th>Arrival Date</th>-->
                            </tr>
                        </thead>
                        <tbody>
                            <t t-foreach="doc.segment_ids.filtered(lambda x:x.pnr == provider_itin_id.pnr)" t-as="provider_segment_id">
                                <tr>
                                    <td><span t-field="provider_segment_id.pnr"/></td>
                                    <td>
                                        <span t-field="provider_segment_id.origin_id.name"/><br/>
                                        <span t-esc="time.strftime('%d %b %Y %H:%M', time.strptime(provider_segment_id.departure_date[:16],'%Y-%m-%d %H:%M'))"/>
                                    </td>
                                    <td>
                                        <span t-field="provider_segment_id.destination_id.name"/><br/>
                                        <span t-esc="time.strftime('%d %b %Y %H:%M', time.strptime(provider_segment_id.arrival_date[:16],'%Y-%m-%d %H:%M'))"/>
                                    </td>
                                    <td><span t-field="provider_segment_id.carrier_id.name"/></td>
                                    <td><span t-field="provider_segment_id.name"/></td>
<!--                                    <td><span t-field="provider_segment_id.departure_date" t-options ='{"format": "dd/MM/yyyy HH:mm:ss"}'/></td>-->
<!--                                    <td><span t-esc="time.strftime('%d %b %Y %H:%M', time.strptime(provider_segment_id.departure_date[:16],'%Y-%m-%d %H:%M'))"/></td>-->
<!--                                    <td><span t-esc="time.strftime('%d %b %Y %H:%M', time.strptime(provider_segment_id.arrival_date[:16],'%Y-%m-%d %H:%M'))"/></td>-->
                                </tr>
                            </t>
                        </tbody>
                    </table>

                    <span style="font-size: 28px; font-weight: 730">Passenger Detail(s)</span><br/>
                    <div class="box" style="margin: 20px 20px 20px 20px; border-style: solid; border-width: 1px; border-color: #BBB; border-radius: 20px">
                        <div class="row" style="margin-left: 0px; margin-right: 0px; margin-top: 5px; margin-bottom: 5px">
                            <div class="col-1" style="text-align: center; font-size:17px;">
                                No.
                            </div>
                            <div class="col-4" style="text-align: center; font-size:17px;">
                                Name
                            </div>
                            <div class="col-2" style="text-align: right; font-size:17px; padding-right: 30px;">
                                Birth Date
                            </div>
                            <div class="col-2" style="text-align: center; font-size:17px;">
                                Pax Type
                            </div>
                            <div class="col-3" style="text-align: center; font-size:17px;">
                                Facility(s)
                            </div>
                        </div>
                        <div style="border: 1px solid #BBB; margin-bottom: 5px; margin-left: 15px; margin-right: 15px"/>
                        <t t-set="psg_index" t-value="0"/>
                        <t t-foreach="provider_itin_id.ticket_ids" t-as="psg">
                            <div class="row" style="margin-left: 0px; margin-right: 0px">
                                <div class="col-1" style="text-align: center">
                                    <label style="font-weight:450; font-size:17px; margin-bottom: 0px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;"><span t-esc="psg_index+1"/>.</label>
                                </div>
                                <div class="col-4" style="text-align: left">
                                    <label style="font-weight:450; font-size:17px; margin-bottom: 0px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;"><span t-field="psg.passenger_id.title"/> <span t-field="psg.passenger_id.name"/></label>
                                </div>
                                <div class="col-2" style="text-align: right">
                                    <label style="font-weight:450; font-size:17px; margin-bottom: 0px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;"><span t-field="psg.passenger_id.birth_date" t-options ='{"format": "dd MMM yyyy"}'/></label>
                                </div>
                                <div class="col-2" style="text-align: center">
                                    <label style="font-weight:450; font-size:17px; margin-bottom: 0px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;"><span t-field="psg.pax_type"/></label>
                                </div>
                                <div class="col-3" style="text-align: center">
                                    -
                                    <!--<i style="margin-right:3px;" class="fa fa-suitcase"/>-->
                                    <!--<i style="margin-right:3px;" class="fa fa-cutlery"/>-->
                                    <!--<i style="margin-right:3px;" class="fa fa-wheelchair"/>-->
                                </div>
                            </div>
                        </t>
                        <div style="margin-bottom: 5px"/>
                    </div>
                </t>
            </div>
        </div>
    </template>

    <template id="activity_itinerary_view">
        <!-- Main Params -->
        <div class="row">
            <div class="col-12">
                <span style="font-size: 28px; font-weight: 730">Reservation Detail(s)</span><br/>
            </div>
        </div>
        <div class="row">
            <div class="col-12">
                <t t-foreach="doc.provider_booking_ids" t-as="provider_itin_id">
                    <table class="table table-sm" style="text-align:center;">
                        <thead>
                            <tr>
                                <th>PNR</th>
                                <th>Visit Date</th>
                                <th>Time Slot</th>
                                <th>Activity Title</th>
                                <th>Product Type</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><span t-field="provider_itin_id.pnr"/></td>
                                <!--Jadi nya MM/DD/YYYY-->
                                <!--<td><span t-field="provider_itin_id.visit_date" t-options="{'widget': 'date'}"/></td> -->
                                <td><span t-esc="provider_itin_id.visit_date.strftime('%d %B %Y')"/></td>
                                <td><t t-if="doc.timeslot"><span t-field="doc.timeslot"/></t><t t-else=""><span>-</span></t></td>
                                <td><span t-field="provider_itin_id.activity_id.name"/><br/></td>
                                <td><span t-field="provider_itin_id.activity_product_id.name"/></td>
                            </tr>
                        </tbody>
                    </table>

                    <span style="font-size: 28px; font-weight: 730">Guest Detail(s)</span><br/>
                    <div class="box" style="margin: 20px 20px 20px 20px; border-style: solid; border-width: 1px; border-color: #BBB; border-radius: 20px">
                        <div class="row" style="margin-left: 0px; margin-right: 0px; margin-top: 5px; margin-bottom: 5px">
                            <div class="col-1" style="text-align: center; font-size:17px;">
                                No.
                            </div>
                            <div class="col-4" style="text-align: center; font-size:17px;">
                                Name
                            </div>
                            <div class="col-2" style="text-align: right; font-size:17px; padding-right: 30px;">
                                Birth Date
                            </div>
                            <div class="col-2" style="text-align: center; font-size:17px;">
                                Pax Type
                            </div>
                            <div class="col-3" style="text-align: center; font-size:17px;">
                                Ticket
                            </div>
                        </div>
                        <div style="border: 1px solid #BBB; margin-bottom: 5px; margin-left: 15px; margin-right: 15px"/>
                        <t t-set="psg_index" t-value="0"/>
                        <t t-foreach="provider_itin_id.ticket_ids" t-as="psg">
                            <div class="row" style="margin-left: 0px; margin-right: 0px">
                                <div class="col-1" style="text-align: center">
                                    <label style="font-weight:450; font-size:17px; margin-bottom: 0px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;"><span t-esc="psg_index+1"/>.</label>
                                </div>
                                <div class="col-4" style="text-align: left">
                                    <label style="font-weight:450; font-size:17px; margin-bottom: 0px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;"><span t-field="psg.passenger_id.title"/> <span t-field="psg.passenger_id.name"/></label>
                                </div>
                                <div class="col-2" style="text-align: right">
                                    <label style="font-weight:450; font-size:17px; margin-bottom: 0px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;"><span t-field="psg.passenger_id.birth_date" t-options ='{"format": "dd MMM yyyy"}'/></label>
                                </div>
                                <div class="col-2" style="text-align: center">
                                    <label style="font-weight:450; font-size:17px; margin-bottom: 0px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;"><span t-field="psg.pax_type"/></label>
                                </div>
                                <div class="col-3" style="text-align: center">
                                    <label style="font-weight:450; font-size:17px; margin-bottom: 0px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;"><span t-field="psg.ticket_number"/></label>
                                </div>
                            </div>
                        </t>
                        <div style="margin-bottom: 5px"/>
                    </div>
                </t>
            </div>
        </div>
    </template>

    <template id="hotel_itinerary_content_view">
        <div class="row">
            <div class="col-12">
                <span style="font-size: 28px; font-weight: 730">Reservation Detail(s)</span><br/>
            </div>
        </div>
        <div class="row">
            <div class="col-12">
                <t t-foreach="doc.room_detail_ids" t-as="provider_itin_id">
                    <table class="table table-sm" style="text-align:center;">
                        <thead>
                            <tr>
                                <th>Voucher No.</th>
                                <th>Check In</th>
                                <th>Check Out</th>
                                <th>Room Name</th>
                                <th>Meal Type</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><span t-field="provider_itin_id.issued_name"/></td>
                                <td><span t-field="doc.checkin_date"/></td>
                                <td><span t-field="doc.checkout_date"/></td>
                                <td><span t-field="provider_itin_id.room_name"/><br/></td>
                                <td><span t-field="provider_itin_id.room_type"/></td>
                            </tr>
                        </tbody>
                    </table>
                </t>
                <span style="font-size: 28px; font-weight: 730">Guest Detail(s)</span><br/>
                <div class="box" style="margin: 20px 20px 20px 20px; border-style: solid; border-width: 1px; border-color: #BBB; border-radius: 20px">
                    <div class="row" style="margin-left: 0px; margin-right: 0px; margin-top: 5px; margin-bottom: 5px">
                        <div class="col-1" style="text-align: center; font-size:17px;">
                            No.
                        </div>
                        <div class="col-4" style="text-align: center; font-size:17px;">
                            Name
                        </div>
                        <div class="col-4" style="text-align: right; font-size:17px; padding-right: 30px;">
                            Birth Date
                        </div>
                        <div class="col-3" style="text-align: center; font-size:17px;">
                            Pax Type
                        </div>
                    </div>
                    <div style="border: 1px solid #BBB; margin-bottom: 5px; margin-left: 15px; margin-right: 15px"/>
                    <t t-set="psg_index" t-value="0"/>
                    <t t-foreach="doc.passenger_ids" t-as="psg">
                        <div class="row" style="margin-left: 0px; margin-right: 0px">
                            <div class="col-1" style="text-align: center">
                                <label style="font-weight:450; font-size:17px; margin-bottom: 0px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;"><span t-esc="psg_index+1"/>.</label>
                            </div>
                            <div class="col-4" style="text-align: left">
                                <label style="font-weight:450; font-size:17px; margin-bottom: 0px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;"><span t-field="psg.name"/></label>
                            </div>
                            <div class="col-4" style="text-align: right">
                                <label style="font-weight:450; font-size:17px; margin-bottom: 0px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;"><span t-field="psg.birth_date" t-options ='{"format": "dd MMM yyyy"}'/></label>
                            </div>
                            <div class="col-3" style="text-align: center">
                                <label style="font-weight:450; font-size:17px; margin-bottom: 0px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;"><span t-field="psg.gender"/></label>
                            </div>
                        </div>
                    </t>
                    <div style="margin-bottom: 5px"/>
                </div>
            </div>
        </div>
    </template>

    <template id="json_itinerary_content_view">
        <div class="row">
            <div class="col-12">
                <span style="font-size: 28px; font-weight: 730">Reservation Detail(s)</span><br/>
            </div>
        </div>
        <div class="row">
            <div class="col-12">
                <!-- Hotel -->
                <t t-if="doc['type'] == 'hotel'">
                    <table class="table table-sm" style="text-align:center;">
                        <thead>
                            <tr>
                                <th>Voucher No.</th>
                                <th>Check In</th>
                                <th>Check Out</th>
                                <th>Hotel</th>
                                <th>Room</th>
                                <th>Meal Type</th>
                            </tr>
                        </thead>
                        <tbody>
                            <t t-foreach="doc['line']" t-as="line">
                                <tr>
                                    <td><span t-esc="line['resv']"/></td>
                                    <td><span t-esc="line['checkin']"/></td>
                                    <td><span t-esc="line['checkout']"/></td>
                                    <td><span t-esc="line['hotel_name']"/><br/></td>
                                    <td><span t-esc="line['room_name']"/></td>
                                    <td><span t-esc="line['meal_type']"/></td>
                                </tr>
                            </t>
                        </tbody>
                    </table>
                </t>
                <!-- Activity -->
                <t t-if="doc['type'] == 'activity'">
                    <table class="table table-sm" style="text-align:center;">
                        <thead>
                            <tr>
                                <th>Voucher No.</th>
                                <th>Visit Date</th>
                                <th>Time Slot</th>
                                <th>Activity</th>
                                <th>Product Type</th>
                            </tr>
                        </thead>
                        <tbody>
                            <t t-foreach="doc['line']" t-as="line">
                                <tr>
                                    <td><span t-esc="line['resv']"/></td>
                                    <td><span t-esc="line['checkin']"/></td>
                                    <td><span t-esc="line['time_slot']"/><br/></td>
                                    <td><span t-esc="line['activity_title']"/></td>
                                    <td><span t-esc="line['product_type']"/></td>
                                </tr>
                            </t>
                        </tbody>
                    </table>
                </t>

                <span style="font-size: 28px; font-weight: 730">Guest Detail(s)</span><br/>
                <div class="box" style="margin: 20px; border: 1px solid #BBB; border-radius: 20px">
                    <div class="row" style="margin: 5px 0; font-size:17px;">
                        <div class="col-1" style="text-align: center;">
                            No.
                        </div>
                        <div class="col-3" style="text-align: center;">
                            Name
                        </div>
                        <div class="col-2" style="text-align: center;">
                            Pax Type
                        </div>
                        <div class="col-3" style="text-align: center;">
                            Birth Date
                        </div>
                        <div class="col-3" style="text-align: center; padding-right: 30px;">
                            Additional Info
                        </div>
                    </div>
                    <div style="border: 1px solid #BBB; margin: 0 15px 5px;"/>
                    <t t-set="psg_index" t-value="0"/>
                    <t t-foreach="doc['passenger']" t-as="psg">
                        <div class="row" style="text-align: center; margin-left: 0px; margin-right: 0px; font-weight:450; font-size:17px; margin-bottom: 0px; ">
                            <div class="col-1">
                                <label style="white-space: nowrap; overflow: hidden; text-overflow: ellipsis;"><span t-esc="psg_index+1"/>.</label>
                            </div>
                            <div class="col-3">
                                <label style="white-space: nowrap; overflow: hidden; text-overflow: ellipsis;"><span t-esc="psg['name']"/></label>
                            </div>
                            <div class="col-2">
                                <label style="white-space: nowrap; overflow: hidden; text-overflow: ellipsis;"><span t-esc="psg['pax_type']"/></label>
                            </div>
                            <div class="col-3">
                                <label style="white-space: nowrap; overflow: hidden; text-overflow: ellipsis;"><span t-esc="psg['birth_date']"/></label>
                            </div>
                            <div class="col-3" style="text-align: left;">
                                <t t-if="psg['additional_info']">
                                    <ul style="padding: 3px;">
                                        <t t-foreach="psg['additional_info']" t-as="info_id">
                                            <li><span t-esc="info_id"/></li>
                                        </t>
                                    </ul>
                                </t>
                                <t t-else="">
                                    <span style="text-align: center;">-</span>
                                </t>
                            </div>
                        </div>
                    </t>
                    <div style="margin-bottom: 5px"/>
                </div>
            </div>
        </div>
    </template>

    <template id="itinerary_signature">
        <div class="row">
            <div class="col-11">
                I, the undersigned, declare that the reservations I have made correspond to my true IDs and I made this statement consciously without any
                enforcement from anyone.
            </div>
        </div>
        <br/><br/>
        <table width="100%">
            <tr>
                <td width="80%"/>
                <td width="20%" style="text-align:center">
                    Surabaya, <t t-esc="date_now"/><br/>
                    <p>Buyer</p>
                    <p style="color: white;">.</p>
                    <p style="color: white;">.</p>
                    <p style="color: white;">.</p>
                    <p>(............................)</p>
                    <p style="border-top: 1px solid black">Representative Signature</p>
                </td>
            </tr>
        </table>
    </template>

    <template id="printout_itinerary">
        <t t-set="data_report_header_spacing" t-value="20"/>
        <t t-set="data_report_margin_top" t-value="2"/>
        <t t-call="web.html_container">
            <t t-foreach="docs" t-as="doc">
                <div class="page">
                    <t t-call="tt_report_common.external_layout">
                        <t t-if="doc_model == 'tt.reservation.airline'">
                            <t t-call="tt_report_common.reservation_airline_content_view"/>
                        </t>
                        <t t-if="doc_model == 'tt.reservation.hotel'">
                            <t t-call="tt_report_common.hotel_itinerary_content_view"/>
                        </t>
                        <t t-call="tt_report_common.itinerary_price_detail"/>
                        <br/>
                        <t t-call="tt_report_common.itinerary_signature"/>
                    </t>
                </div>
            </t>
        </t>
    </template>

    <template id="printout_activity_itinerary">
        <t t-set="data_report_header_spacing" t-value="20"/>
        <t t-set="data_report_margin_top" t-value="2"/>
        <t t-call="web.html_container">
            <t t-foreach="docs" t-as="doc">
                <div class="page">
                    <t t-call="tt_report_common.external_layout">
                        <t t-call="tt_report_common.activity_itinerary_view"/>
                        <t t-call="tt_report_common.itinerary_price_detail"/>
                        <br/>
                        <t t-call="tt_report_common.itinerary_signature"/>
                    </t>
                </div>
            </t>
        </t>
    </template>

    <template id="printout_json_itinerary">
        <t t-set="data_report_header_spacing" t-value="20"/>
        <t t-set="data_report_margin_top" t-value="2"/>
        <t t-call="web.html_container">
            <t t-foreach="docs" t-as="doc">
                <div class="page">
                    <t t-call="tt_report_common.external_layout">
                        <t t-call="tt_report_common.json_itinerary_content_view"/>
                        <t t-call="tt_report_common.itinerary_price_detail"/>
                        <br/>
                        <t t-call="tt_report_common.itinerary_signature"/>
                    </t>
                </div>
            </t>
        </t>
    </template>
</odoo>